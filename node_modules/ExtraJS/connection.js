const knex = require('knex');

switch(getEnv('DB_DRIVER', 'none')) {
	case 'mysql':
		global.db = knex({
				client: 'mysql',
				connection: {
					host: getEnv('DB_HOST', '127.0.0.1'),
					user: getEnv('DB_USERNAME', 'root'),
					password: getEnv('DB_PASSWORD', ''),
					database: getEnv('DB_DATABASE', ''),
					charset: getEnv('DB_CHARSET', 'utf8mb4_unicode_ci')
				}
			});
		break;
	case 'pg':
		global.db = knex({
				client: 'pg',
				connection: {
					host: getEnv('DB_HOST', '127.0.0.1'),
					user: getEnv('DB_USERNAME', 'root'),
					password: getEnv('DB_PASSWORD', ''),
					database: getEnv('DB_DATABASE', ''),
					charset: getEnv('DB_CHARSET', 'utf8mb4_unicode_ci')
				}
			});
		break;
	case 'sqlite3':
		global.db = knex({
				client: 'sqlite3',
				connection: {
					filename: getEnv('DB_FILENAME', './database.db')
				}
			});
		break;
	default:
		global.db = null;
		break;
}